# 関東春ロボコン2023のチーム「とんぺーのびぎなー」チームの組込みシステムで使用したコード
マイコンはSTM32 G431KBT6を使用
マイコンにはT-semi御用達のCAN通信基板を使用し、すべての基板同士は同一のCANバスで接続
モーターはDJIのブラシレスモーターm3508, ESCにC620を使用

## AirCylinderDriver**
エアシリンダ関係は特筆すべきことはない。ただただ汚いだけ。シリンダ駆動系の標準的な部分はライブラリ化するべきだった。例外処理はweakで宣言しておくとよかったのかな？

# CANReceiver
CANバスのすべてのデータをUARTでノートパソコンにシリアル通信で出力するやつ。よくよく考えたら帯域足りてなくね？ちゃんと動いていた気はするんだけどな

## CANTxtest
謎

## DMATest, DMA_ADCTest, DistanceSensor
 すべて複数チャンネルアナログ入力をDMAで読んでるやつ。あまり覚えてないけどDistanceSensorは確実に動いていたので参考になるかも。

## ESC*
 ESCでブラシレスモーターを動かして吸引しようとしてたやつ。どっちが動いたかは不明だがどちらかは確実に動いた。
 PWMの生成まではどちらもできていたので、動かない方でもいい感じにパルス幅を調整してESCの初期化をちゃんとすれば動くはず

## MotorControlTest*
 謎。たぶんタイマ割り込みでPID回す練習をしていた気がする。



## PowerController*
 2の方が新しいし実際に使ったやつのはず。
 回路側で過電流を検知⇒自動復帰をしてくれて、過電流を検知したときにマイコンに割り込み処理が入ってCANですべての基板に緊急停止信号が行くはずだったのになぜかできなかった（外部割込みのコールバック内でCANの信号を出力できなかった（要検証））。

## SPI*
使わなかったし動かなかったので参考にはならない

## R2_MCU_9AXIS
学ロボ2022のとこから引っ張ってきたやつ。見ただけで何も使ってない。

## Servo Tester
サーボ動かすためだけのやつ

## TestController
入出力と部品の都合上二枚の通信基板を使用していたので無印と2が存在する。片方が移動、もう片方が機構を動かしていたやつ

## f411,f446云々のやつ
CANの通信がうまくいかないことが多発したのでCANコントローラーを二系統持つものを利用して移動系を分離しようとした名残。
ID（CANの優先順位）を変えたら解決したのでf411とかは使ってない。

## gpioTest
謎

## omniwheelFBTest
多分試合でも使っていたやつ。
3輪オムニの逆運動学とタイマ割り込み、PID制御を利用してなんかいい感じにしてた

## udp,Ethernet
これらの文字列が入っているやつはなんも参考にならん
動かん意味わからん
